"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[705],{4932:function(t,l,e){e.r(l),e.d(l,{default:function(){return Pt}});var o=e(6252),d=e(3577),a=e(9963);const i=(0,o._)("div",{class:"loadingio-spinner-dual-ball-eq2qwqnc1x"},[(0,o._)("div",{class:"ldio-tw1s1a7kdy9"},[(0,o._)("div"),(0,o._)("div"),(0,o._)("div")])],-1),s={class:"container-fluid"},r={class:"text-end mt-4"},c={class:"table mt-4"},n=(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{width:"120"},"分類"),(0,o._)("th",null,"產品名稱"),(0,o._)("th",null,"是否多圖"),(0,o._)("th",{width:"120"},"原價"),(0,o._)("th",{width:"120"},"售價"),(0,o._)("th",{width:"100"},"是否啟用"),(0,o._)("th",{width:"120"},"編輯")])],-1),u={key:0,class:"text-primary"},m={key:1},p={key:0,class:"text-success"},b={key:1},_={class:"btn-group"},h=["onClick"],g=["onClick"],v={id:"productModal",ref:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},P={class:"modal-dialog modal-xl"},y={class:"modal-content border-0"},w=(0,o._)("div",{class:"modal-header bg-dark text-white"},[(0,o._)("h5",{id:"productModalLabel",class:"modal-title"},[(0,o._)("span",null,"新增產品")]),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"modal-body"},U={class:"row"},k={class:"col-sm-4"},x={class:"mb-2"},M={class:"mb-3"},C=(0,o._)("label",{for:"imageUrl",class:"form-label"},"輸入主圖網址",-1),D=["src"],V={class:"mb-3"},L=(0,o._)("h3",null,"多圖設置",-1),q={key:0},z=["onUpdate:modelValue"],N=["src"],$={class:"col-sm-8"},H={class:"mb-3"},Y=(0,o._)("label",{for:"title",class:"form-label"},"標題",-1),A={class:"row"},K={class:"mb-3 col-md-6"},S=(0,o._)("label",{for:"category",class:"form-label"},"分類",-1),Z={class:"mb-3 col-md-6"},R=(0,o._)("label",{for:"price",class:"form-label"},"單位",-1),W={class:"row"},j={class:"mb-3 col-md-6"},B=(0,o._)("label",{for:"origin_price",class:"form-label"},"原價",-1),E={class:"mb-3 col-md-6"},F=(0,o._)("label",{for:"price",class:"form-label"},"售價",-1),G=(0,o._)("hr",null,null,-1),I={class:"mb-3"},J=(0,o._)("label",{for:"description",class:"form-label"},"產品描述",-1),O={class:"mb-3"},Q=(0,o._)("label",{for:"content",class:"form-label"},"說明內容",-1),T={class:"mb-3"},X={class:"form-check"},tt=(0,o._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),lt={class:"modal-footer"},et=(0,o._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1),ot={id:"delProductModal",ref:"delProductModal",class:"modal fade",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},dt={class:"modal-dialog"},at={class:"modal-content border-0"},it=(0,o._)("div",{class:"modal-header bg-danger text-white"},[(0,o._)("h5",{id:"delProductModalLabel",class:"modal-title"},[(0,o._)("span",null,"刪除產品")]),(0,o._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),st={class:"modal-body"},rt=(0,o.Uk)(" 是否刪除 "),ct={class:"text-danger"},nt=(0,o.Uk)(" 商品(刪除後將無法恢復)。 "),ut={class:"modal-footer"},mt=(0,o._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function pt(t,l,e,pt,bt,_t){const ht=(0,o.up)("LoadingPlugin");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(ht,{active:bt.isLoading,"is-full-page":bt.fullPage,"z-index":1060},{default:(0,o.w5)((()=>[i])),_:1},8,["active","is-full-page"]),(0,o._)("div",s,[(0,o._)("div",r,[(0,o._)("button",{class:"btn btn-primary",onClick:l[0]||(l[0]=t=>_t.openModal("isNew"))}," 建立新的產品 ")]),(0,o._)("table",c,[n,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(bt.products,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.id},[(0,o._)("td",null,(0,d.zw)(t.category),1),(0,o._)("td",null,(0,d.zw)(t.title),1),(0,o._)("td",null,[t.imagesUrl?((0,o.wg)(),(0,o.iD)("div",u,"多圖")):((0,o.wg)(),(0,o.iD)("div",m,"-"))]),(0,o._)("td",null,(0,d.zw)(t.origin_price),1),(0,o._)("td",null,(0,d.zw)(t.price),1),(0,o._)("td",null,[t.is_enabled?((0,o.wg)(),(0,o.iD)("div",p,"啟用")):((0,o.wg)(),(0,o.iD)("div",b,"未啟用"))]),(0,o._)("td",null,[(0,o._)("div",_,[(0,o._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:l=>_t.openModal("edit",t)}," 編輯 ",8,h),(0,o._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>_t.openModal("delete",t)}," 刪除 ",8,g)])])])))),128))])])]),(0,o._)("div",v,[(0,o._)("div",P,[(0,o._)("div",y,[w,(0,o._)("div",f,[(0,o._)("div",U,[(0,o._)("div",k,[(0,o._)("div",x,[(0,o._)("div",M,[C,(0,o.wy)((0,o._)("input",{type:"text",class:"form-control",id:"imageUrl",placeholder:"請輸入圖片連結","onUpdate:modelValue":l[1]||(l[1]=t=>bt.tempProduct.imageUrl=t)},null,512),[[a.nr,bt.tempProduct.imageUrl]]),(0,o._)("img",{class:"img-fluid",src:bt.tempProduct.imageUrl,alt:""},null,8,D)]),(0,o._)("div",V,[L,Array.isArray(bt.tempProduct.imagesUrl)?((0,o.wg)(),(0,o.iD)("div",q,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(bt.tempProduct.imagesUrl,((t,l)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:l+"5487"},[(0,o.wy)((0,o._)("input",{id:"imagesUrl",type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":t=>bt.tempProduct.imagesUrl[l]=t},null,8,z),[[a.nr,bt.tempProduct.imagesUrl[l]]]),(0,o._)("img",{class:"img-fluid",src:bt.tempProduct.imagesUrl[l],alt:""},null,8,N)],64)))),128)),!bt.tempProduct.imagesUrl.length||bt.tempProduct.imagesUrl[bt.tempProduct.imagesUrl.length-1]?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:l[2]||(l[2]=t=>bt.tempProduct.imagesUrl.push("")),class:"btn btn-outline-primary btn-sm d-block w-100"}," 新增圖片 ")):((0,o.wg)(),(0,o.iD)("button",{key:1,onClick:l[3]||(l[3]=t=>bt.tempProduct.imagesUrl.pop()),class:"btn btn-outline-danger btn-sm d-block w-100"}," 刪除圖片 "))])):(0,o.kq)("",!0)])])]),(0,o._)("div",$,[(0,o._)("div",H,[Y,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[4]||(l[4]=t=>bt.tempProduct.title=t),id:"title",type:"text",class:"form-control",placeholder:"請輸入標題"},null,512),[[a.nr,bt.tempProduct.title]])]),(0,o._)("div",A,[(0,o._)("div",K,[S,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[5]||(l[5]=t=>bt.tempProduct.category=t),id:"category",type:"text",class:"form-control",placeholder:"請輸入分類"},null,512),[[a.nr,bt.tempProduct.category]])]),(0,o._)("div",Z,[R,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[6]||(l[6]=t=>bt.tempProduct.unit=t),id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位"},null,512),[[a.nr,bt.tempProduct.unit]])])]),(0,o._)("div",W,[(0,o._)("div",j,[B,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[7]||(l[7]=t=>bt.tempProduct.origin_price=t),id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價"},null,512),[[a.nr,bt.tempProduct.origin_price,void 0,{number:!0}]])]),(0,o._)("div",E,[F,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":l[8]||(l[8]=t=>bt.tempProduct.price=t),id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[a.nr,bt.tempProduct.price,void 0,{number:!0}]])])]),G,(0,o._)("div",I,[J,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":l[9]||(l[9]=t=>bt.tempProduct.description=t),id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述"},"\n                ",512),[[a.nr,bt.tempProduct.description]])]),(0,o._)("div",O,[Q,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":l[10]||(l[10]=t=>bt.tempProduct.content=t),id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容"},"\n                ",512),[[a.nr,bt.tempProduct.content]])]),(0,o._)("div",T,[(0,o._)("div",X,[(0,o.wy)((0,o._)("input",{id:"is_enabled","onUpdate:modelValue":l[11]||(l[11]=t=>bt.tempProduct.is_enabled=t),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[a.e8,bt.tempProduct.is_enabled]]),tt])])])])]),(0,o._)("div",lt,[et,(0,o._)("button",{type:"button",class:"btn btn-primary",onClick:l[12]||(l[12]=t=>_t.updateProduct(bt.tempProduct.title))}," 確認 ")])])])],512),(0,o._)("div",ot,[(0,o._)("div",dt,[(0,o._)("div",at,[it,(0,o._)("div",st,[rt,(0,o._)("strong",ct,(0,d.zw)(bt.tempProduct.title),1),nt]),(0,o._)("div",ut,[mt,(0,o._)("button",{type:"button",class:"btn btn-danger",onClick:l[13]||(l[13]=t=>_t.delProduct(bt.tempProduct.title))}," 確認刪除 ")])])])],512)],64)}var bt=e(7244),_t=e(1608),ht={data(){return{isLoading:!1,fullPage:!0,products:[],tempProduct:{imagesUrl:[]},productModal:{},delProductModal:{},isNew:!1}},mixins:[_t.Z],methods:{getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/david-frontend/admin/products/all";this.$http.get(t).then((t=>{this.products=t.data.products,this.isLoading=!1}))},openModal(t,l){"isNew"===t?(this.tempProduct={imagesUrl:[]},this.productModal.show(),this.isNew=!0):"edit"===t?(this.tempProduct={...l},this.isNew=!1,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.productModal.show()):"delete"===t&&(this.tempProduct={...l},this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.delProductModal.show())},updateProduct(t){let l="https://vue3-course-api.hexschool.io/v2/api/david-frontend/admin/product",e="post";this.isNew||(l=`https://vue3-course-api.hexschool.io/v2/api/david-frontend/admin/product/${this.tempProduct.id}`,e="put"),this.$http[e](l,{data:this.tempProduct}).then((()=>{this.getProducts(),this.alertAddProduct(t),this.productModal.hide()}))},delProduct(t){let l=`https://vue3-course-api.hexschool.io/v2/api/david-frontend/admin/product/${this.tempProduct.id}`;this.$http.delete(l).then((()=>{this.alertRemoveProduct(t),this.getProducts(),this.delProductModal.hide()}))}},mounted(){this.getProducts();const t=document.querySelector("#productModal");this.productModal=new bt.u_(t);const l=document.querySelector("#delProductModal");this.delProductModal=new bt.u_(l)}},gt=e(3744);const vt=(0,gt.Z)(ht,[["render",pt]]);var Pt=vt}}]);
//# sourceMappingURL=705.b38a7d86.js.map