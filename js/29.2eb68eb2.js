"use strict";(self["webpackChunkvue_test"]=self["webpackChunkvue_test"]||[]).push([[29],{5679:function(t,a,e){function s(t){return{all:t=t||new Map,on:function(a,e){var s=t.get(a);s?s.push(e):t.set(a,[e])},off:function(a,e){var s=t.get(a);s&&(e?s.splice(s.indexOf(e)>>>0,1):t.set(a,[]))},emit:function(a,e){var s=t.get(a);s&&s.slice().map((function(t){t(e)})),(s=t.get("*"))&&s.slice().map((function(t){t(a,e)}))}}}e.d(a,{Z:function(){return l}});const i=s();var l=i},2029:function(t,a,e){e.r(a),e.d(a,{default:function(){return O}});var s=e(6252),i=e(9963),l=e(3577);const o=(0,s._)("div",{class:"loadingio-spinner-dual-ball-eq2qwqnc1x"},[(0,s._)("div",{class:"ldio-tw1s1a7kdy9"},[(0,s._)("div"),(0,s._)("div"),(0,s._)("div")])],-1),n=(0,s._)("div",{class:"pages-banner"},[(0,s._)("img",{src:"https://images.unsplash.com/photo-1508963493744-76fce69379c0?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1770",alt:""}),(0,s._)("h2",{class:"pages-banner-title"},"購物車內容")],-1),r=(0,s._)("div",{class:"frontcart-progress-list container"},[(0,s._)("div",{class:"mt-5"},[(0,s._)("div",{class:"progress"},[(0,s._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:"33.33%"}}," 30% ")])]),(0,s._)("div",{class:"mt-5"},[(0,s._)("div",{class:"frontcart-progress-title d-flex justify-content-center align-items-center"},[(0,s._)("h3",{class:"frontcart-progress-title-fir"},"購物車"),(0,s._)("h4",{class:"frontcart-progress-title-sec"},"購物車內容")])])],-1),c={class:"container"},d={class:"mt-4"},u={class:"table align-middle table-hover"},p=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",style:{width:"5%"}},"刪除"),(0,s._)("th",{scope:"col",style:{width:"4%"}}),(0,s._)("th",{scope:"col",style:{width:"15%"}},"服務項目"),(0,s._)("th",{scope:"col",style:{width:"20%"}},"單價"),(0,s._)("th",{scope:"col",style:{width:"23%"}},"數量 / 單位"),(0,s._)("th",{scope:"col",style:{width:"20%"}},"總計")])],-1),h=["onClick","disabled"],g={class:"bi bi-trash3-fill"},_={key:0,class:"spinner-grow spinner-grow-sm text-primary",role:"status"},v=(0,s._)("span",{class:"visually-hidden"},"Loading...",-1),m=[v],f=["src"],b={class:"align-center"},w={class:"input-group input-group-sm",style:{"max-width":"165px"}},y={class:"input-group"},L=["onUpdate:modelValue","onChange","disabled"],C=["value","selected"],x={class:"input-group-text",id:"basic-addon2"},k=(0,s._)("td",{colspan:"5",class:"text-end fw-bold"},"總金額：",-1),D={class:"text-start"},$={class:"step d-flex justify-content-between"},q={class:"text-start"},I=(0,s.Uk)(" 回到服務列表 "),z=["disabled"],N={class:"text-end"};function H(t,a,e,v,H,U){const A=(0,s.up)("LoadingPlugin"),M=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(A,{active:H.isLoading,"is-full-page":H.fullPage,"z-index":1060},{default:(0,s.w5)((()=>[o])),_:1},8,["active","is-full-page"]),n,r,(0,s._)("div",c,[(0,s._)("div",d,[(0,s._)("table",u,[p,(0,s._)("tbody",null,[H.cartData.carts?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(H.cartData.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{class:"align-center",key:t.id},[(0,s._)("th",null,[(0,s._)("button",{scope:"row",type:"button",class:"btn btn-outline-dark btn-sm",onClick:a=>U.removeCartItem(t.id,t.product.title),disabled:H.isLoadingLocal===t.id},[(0,s.wy)((0,s._)("i",g,null,512),[[i.F8,H.isLoadingLocal!==t.id]]),H.isLoadingLocal===t.id?((0,s.wg)(),(0,s.iD)("div",_,m)):(0,s.kq)("",!0)],8,h)]),(0,s._)("td",null,[(0,s._)("img",{class:"d-none d-lg-inline",src:t.product.imageUrl,alt:"",style:{width:"80px",height:"60px"}},null,8,f)]),(0,s._)("td",null,[(0,s.Wm)(M,{to:`/product/${t.product.id}`},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.product.title),1)])),_:2},1032,["to"])]),(0,s._)("td",null,"NT$ "+(0,l.zw)(t.product.price),1),(0,s._)("td",b,[(0,s._)("div",w,[(0,s._)("div",y,[(0,s.wy)((0,s._)("select",{class:"form-select","onUpdate:modelValue":a=>t.qty=a,onChange:a=>U.updateCartItem(t),disabled:H.isLoadingLocal===t.id},[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(24,(a=>(0,s._)("option",{value:a,key:`${a}-${t.id}`,selected:t.qty===a},(0,l.zw)(a),9,C))),64))],40,L),[[i.bM,t.qty]]),(0,s._)("span",x,(0,l.zw)(t.product.unit),1)])])]),(0,s._)("td",null,"NT$ "+(0,l.zw)(t.total),1)])))),128)):(0,s.kq)("",!0)]),(0,s._)("tfoot",null,[(0,s._)("tr",null,[k,(0,s._)("td",D,"NT$ "+(0,l.zw)(H.cartData.total),1)])])]),(0,s._)("div",$,[(0,s._)("div",q,[(0,s.Wm)(M,{class:"btn btn-outline-primary me-3",to:"/products"},{default:(0,s.w5)((()=>[I])),_:1}),(0,s._)("button",{onClick:a[0]||(a[0]=(...t)=>U.removeAllCarts&&U.removeAllCarts(...t)),disabled:"clear"===H.isLoadingItem,class:(0,l.C_)([{disabled:0===H.cartData.carts.length},"btn btn-outline-danger"]),type:"button"}," 清空購物車 ",10,z)]),(0,s._)("div",N,[(0,s._)("button",{class:(0,l.C_)([{disabled:0===H.cartData.carts.length},"btn btn-primary"]),type:"button",onClick:a[1]||(a[1]=(...t)=>U.goCheckOut&&U.goCheckOut(...t))}," 下一步 ",2)])])])])],64)}var U=e(1608),A=e(5679),M={data(){return{isLoading:!1,fullPage:!0,isLoadingLocal:!1,isLoadingItem:"",products:[],cartData:{carts:[]}}},mixins:[U.Z],methods:{getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/v2/api/david-frontend/cart";this.$http.get(t).then((t=>{this.cartData=t.data.data,A.Z.emit("get-cart"),this.checkCart(),this.isLoading=!1}))},getCartNoLoading(){const t="https://vue3-course-api.hexschool.io/v2/api/david-frontend/cart";this.$http.get(t).then((t=>{A.Z.emit("get-cart"),this.cartData=t.data.data}))},removeCartItem(t,a){this.isLoadingLocal=t;const e=`https://vue3-course-api.hexschool.io/v2/api/david-frontend/cart/${t}`;this.$http.delete(e).then((()=>{this.isLoadingLocal=!1,this.getCartNoLoading(),this.alertRemoveCartItem(a)}))},removeAllCarts(){this.isLoadingLocal=!0;const t="https://vue3-course-api.hexschool.io/v2/api/david-frontend/carts";this.$http.delete(t).then((()=>{this.isLoadingLocal=!1,this.getCartNoLoading(),this.alertRemoveAllCart()}))},updateCartItem(t){const a={product_id:t.id,qty:t.qty};this.isLoadingLocal=t.id,this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/david-frontend/cart/${t.id}`,{data:a}).then((()=>{this.isLoadingLocal=!1,this.getCartNoLoading(),this.alertUpdateCartItem()}))},goCheckOut(){this.$router.push("/checkout")},checkCart(){0===this.cartData.carts.length&&(this.alertRemindCart(),this.$router.push("/products"))}},mounted(){this.getCart()}},Z=e(3744);const j=(0,Z.Z)(M,[["render",H]]);var O=j}}]);
//# sourceMappingURL=29.2eb68eb2.js.map